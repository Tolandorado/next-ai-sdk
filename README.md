## ChatGPT Lite — тестовое задание

Упрощённый аналог интерфейса ChatGPT с тредами, персистентностью сообщений в SQLite (через Bun) и базовой работой с XLSX‑таблицей.

### Стек

- Next.js 16 (App Router, TypeScript)
- Bun (dev‑сервер и SQLite через `bun:sqlite`)
- Vercel AI SDK (`ai`, `@ai-sdk/openai`, `useChat`)
- Tailwind (базовая стилизация из шаблона)
- `xlsx` для работы с таблицей

### Подготовка окружения

1. Установите Bun: см. инструкции на `https://bun.sh`.
2. В корне репозитория перейдите в папку фронтенда:

```bash
cd frontend
```

3. Скопируйте `.env` из примера и укажите ключ модели:

```bash
cp .env.example .env   # создайте .env.example при необходимости
```

Переменные:

- `OPENAI_API_KEY` — ключ OpenAI (или совместимой модели)
- `DATABASE_PATH` — путь к SQLite (по умолчанию `./data/chat.db`)
- `XLSX_FILE_PATH` — путь к XLSX‑файлу (по умолчанию `./data/example.xlsx`)

### Запуск

```bash
bun --bun run dev
```

Откройте `http://localhost:3000` в браузере.

### Функциональность

- Слева — список тредов: создание нового, выбор существующего, загрузка истории.
- Справа — чат на `useChat` с отправкой сообщений в `/api/chat` и сохранением в БД.
- Сообщения и треды хранятся в SQLite (`bun:sqlite`) через слой репозиториев.
- Кнопка «Открыть таблицу» загружает диапазон XLSX через `/api/xlsx/range` и показывает превью.
- Клик по превью открывает модалку‑грид, где можно мышкой выделить диапазон и вставить меншон вида `@Sheet1!A1:B3` в чате.
- Специальная команда:

```text
/update @Sheet1!A2 123
```

перед выполнением показывает подтверждение (Да/Нет) и, при согласии, обновляет ячейку через `/api/xlsx/update`.

